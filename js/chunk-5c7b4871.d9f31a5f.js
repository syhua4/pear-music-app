(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c7b4871"],{"17b0":function(t,s,e){"use strict";var i=e("bc44"),c=e.n(i);c.a},"4f02":function(t,s,e){},"6ed7":function(t,s,e){"use strict";var i=e("4f02"),c=e.n(i);c.a},"95c7":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"scroll-view",style:{"--height":t.height}},[e("div",{ref:"cover",staticClass:"cover"},[t._t("cover")],2),e("div",{staticClass:"tools"},[t._t("tab"),e("div",{staticClass:"left-tool"},[t._t("left")],2),e("div",{staticClass:"right-tool"},[t._t("right")],2)],2),e("scroll",[t._t("component")],2)],1)},c=[],a=e("8d33"),n={name:"ScrollView",components:{Scroll:a["a"]},props:{height:{type:String,default:"35%"}}},l=n,o=(e("17b0"),e("2877")),r=Object(o["a"])(l,i,c,!1,null,"970440dc",null);s["a"]=r.exports},a283:function(t,s,e){"use strict";var i=e("e6ca"),c=e.n(i);c.a},b827:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"album"}},[e("nav-bar",{staticClass:"nav"},[e("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),e("div",{staticClass:"header",attrs:{slot:"center"},slot:"center"},[t._v("专辑")])]),e("scroll-view",[e("album-display",{attrs:{slot:"cover",item:t.albumInfo},on:{multiSelect:t.multiSelect},slot:"cover"}),t.selectMode?t._e():e("div",{staticClass:"play-all",attrs:{slot:"left"},on:{click:function(s){return s.stopPropagation(),t.play(s)}},slot:"left"},[e("i",{staticClass:"iconfont icon-play"}),e("span",{staticClass:"tool-header"},[t._v("播放全部")])]),t.selectMode?e("div",{staticClass:"select-all",attrs:{slot:"left"},on:{click:function(s){return s.stopPropagation(),t.selectAll(s)}},slot:"left"},[e("i",{staticClass:"iconfont",class:t.checkAll?"icon-select-fill":"icon-select-unfill"}),e("span",{staticClass:"tool-header"},[t._v("全部")])]):t._e(),t.selectMode?e("span",{staticClass:"select-all-text",attrs:{slot:"right"},on:{click:t.multiSelect},slot:"right"},[t._v("完成")]):t._e(),e("album-list",{ref:"list",attrs:{slot:"component",item:t.songs,multiSelect:t.selectMode},on:{trackClick:t.play,trackMoreClick:t.trackMoreClick,isChecked:t.checked},slot:"component"})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectMode,expression:"selectMode"}],staticClass:"select-toolbar",class:{active:t.isChecked}},[e("div",{staticClass:"play-next",on:{click:t.addToPlayer}},[e("i",{staticClass:"iconfont icon-add-next"}),e("p",[t._v("下一首播放")])]),e("div",{staticClass:"add-to-playlist",on:{click:t.selectPlaylist}},[e("i",{staticClass:"iconfont icon-add"}),e("p",[t._v("收藏到歌单")])])]),e("more-song-options",{directives:[{name:"show",rawName:"v-show",value:(t.song&&Object.keys(t.song).length)|t.isChecked,expression:"(song && Object.keys(song).length) | isChecked"}],ref:"trackPopUp",attrs:{song:t.song}})],1)},c=[],a=(e("4de4"),e("caad"),e("a15b"),e("2532"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.item&&Object.keys(t.item).length>0?e("div",{staticClass:"album-display",style:{backgroundImage:t.backgroundImage}},[e("div",{staticClass:"display-wrapper",style:{"--height":t.coverHeight+"px"}},[e("div",{staticClass:"main-display"},[e("div",{staticClass:"display-img-wrapper"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(t.item.picUrl),expression:"fmtUrl(item.picUrl)"}]})]),e("div",{staticClass:"display-content-wrapper"},[e("div",{staticClass:"title"},[t._v(t._s(t.item.name))]),e("div",{staticClass:"creator"},[e("span",{staticClass:"creator-name"},[t._v("歌手: "+t._s(t.item.artist.name))]),e("i",{staticClass:"iconfont icon-next"})]),e("div",{staticClass:"pub-time"},[t._v("发行时间: "+t._s(t.getDate(t.item.publishTime)))]),e("div",{staticClass:"desc"},[e("div",{staticClass:"desc-content"},[t._v(t._s(t.item.description))]),e("i",{staticClass:"iconfont icon-next"})])])]),e("div",{staticClass:"sub-display"},[e("div",{staticClass:"btn-wrapper",on:{click:function(s){return s.stopPropagation(),t.noFunc(s)}}},[e("i",{staticClass:"iconfont icon-comment"}),e("span",{staticClass:"btn-text"},[t._v(t._s(t._f("round")(t.item.info.commentCount)))])]),e("div",{staticClass:"btn-wrapper",on:{click:t.share}},[e("i",{staticClass:"iconfont icon-share"}),e("span",{staticClass:"btn-text"},[t._v(t._s(t._f("round")(t.item.info.shareCount)))])]),e("div",{staticClass:"btn-wrapper",on:{click:t.noFunc}},[e("i",{staticClass:"iconfont icon-download"}),e("span",{staticClass:"btn-text"},[t._v("下载")])]),e("div",{staticClass:"btn-wrapper",on:{click:t.multiSelect}},[e("i",{staticClass:"iconfont icon-select"}),e("span",{staticClass:"btn-text"},[t._v("多选")])])])])]):t._e()}),n=[],l=(e("99af"),e("b0c0"),e("b64b"),e("5530")),o=e("eecb"),r=e("90b9"),u=e("2f62"),h={name:"AlbumDisplay",mixins:[o["d"],o["g"]],mounted:function(){this.coverHeight=this.$parent.$refs.cover.clientHeight},data:function(){return{backgroundImage:"",coverHeight:0}},props:{item:{type:Object,default:function(){},required:!0}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])(["cookie"])),{},{getDate:function(){return function(t){var s=Object(r["b"])(t/1e3);return"".concat(s.year,"-").concat(s.month,"-").concat(s.date)}}}),methods:{multiSelect:function(){this.$emit("multiSelect")},noFunc:function(){this.$toast.show("暂时还不支持哦",1e3)},share:function(){var t=this,s="分享".concat(this.item.artist.name,"的专辑 ").concat("«"+this.item.name+"»"," https://syhua4.github.io/pear-music-app/#/album/").concat(this.item.id);this.$copyText(s).then((function(){t.$toast.show("复制链接成功",1e3)}),(function(){t.$toast.show("复制链接失败, 请重试",1e3)}))}},watch:{item:{handler:function(t){Object.keys(t).length>0&&(this.backgroundImage="url(".concat(this.fmtUrl(t.blurPicUrl),")"))}}}},d=h,f=(e("6ed7"),e("2877")),m=Object(f["a"])(d,a,n,!1,null,"bbaf3c08",null),p=m.exports,k=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"album-list"},t._l(t.item,(function(s,i){return e("div",{key:s.id,staticClass:"track-wrapper"},[e("song-view",[t.multiSelect?e("i",{staticClass:"iconfont ",class:t.checkedList.includes(s.id)?"icon-select-fill":"icon-select-unfill",attrs:{slot:"left"},on:{click:function(e){return t.check(s.id)}},slot:"left"}):e("span",{staticClass:"index",attrs:{slot:"left"},slot:"left"},[t._v(t._s(i+1))]),e("div",{staticClass:"track-info",attrs:{slot:"center"},on:{click:function(s){return t.trackClick(i)}},slot:"center"},[e("div",{staticClass:"track-title"},[t._v(t._s(s.name))]),e("span",{staticClass:"track-artist"},[t._v(t._s(t.artists(s.ar)))]),e("span",{staticClass:"track-album"},[t._v(t._s(s.al.name))])]),e("i",{staticClass:"iconfont icon-more--line",attrs:{slot:"right"},on:{click:function(e){return e.stopPropagation(),t.showMore(s)}},slot:"right"})])],1)})),0)},v=[],C=(e("c975"),e("d81d"),e("a434"),e("c6fb")),b={name:"AlbumList",components:{SongView:C["a"]},mixins:[o["b"],o["e"]],data:function(){return{checkedList:[]}},props:{item:{type:Array,default:function(){return[]},required:!0},multiSelect:{type:Boolean,default:!1}},methods:{check:function(t){var s=this.checkedList.indexOf(t);-1===s?this.checkedList.push(t):this.checkedList.splice(s,1)},checkAll:function(){var t=this;this.checkedList=[],this.item.map((function(s){t.checkedList.push(s.id)}))},showMore:function(t){this.$emit("trackMoreClick",t)},trackClick:function(t){this.$emit("trackClick",t)},unCheckAll:function(){this.checkedList=[]}},watch:{item:function(){this.$nextTick((function(){this.loading=!1,this.$emit("dataLoaded")}))},checkedList:{handler:function(t){t.length?this.$emit("isChecked",!0):this.$emit("isChecked",!1)}}}},g=b,_=(e("a283"),Object(f["a"])(g,k,v,!1,null,"41cb4bbf",null)),y=_.exports,w=e("e47a"),$=e("95c7"),x=e("6ae1"),A=e("3311");function M(t){return Object(A["a"])({url:"/album",params:{id:t}})}var S={name:"Album",components:{AlbumDisplay:p,AlbumList:y,NavBar:w["a"],ScrollView:$["a"],MoreSongOptions:x["a"]},mixins:[o["f"]],data:function(){return{albumInfo:{},songs:[],song:{},selectMode:!1,checkAll:!1,isChecked:!1}},created:function(){var t=this;M(this.$route.params.id).then((function(s){t.albumInfo=s.album,t.songs=s.songs}))},methods:{addToPlayer:function(){if(this.isChecked){var t,s=this.$refs.list.checkedList;this.isChecked&&(t=this.songs.filter((function(t){return s.includes(t.id)}))),console.log(t),this.$refs.trackPopUp.addToPlayer("",t),this.$refs.list.unCheckAll(),this.checkAll=!1}},selectPlaylist:function(){var t=this.$refs.list.checkedList.join(",");this.$refs.trackPopUp.selectPlaylist("",t)},play:function(t){this.playSong(this.songs,t)},trackMoreClick:function(t){this.song=t,this.$refs.trackPopUp.showMore=!0},checked:function(t){this.isChecked=t,this.$refs.list.checkedList.length===this.songs.length?this.checkAll=!0:this.checkAll=!1},selectAll:function(){this.checkAll?this.$refs.list.unCheckAll():this.$refs.list.checkAll(),this.checkAll=!this.checkAll},goBack:function(){this.$router.go(-1)},multiSelect:function(){this.selectMode=!this.selectMode}}},O=S,j=(e("e3c5"),Object(f["a"])(O,i,c,!1,null,"5ebc7c9e",null));s["default"]=j.exports},bc44:function(t,s,e){},bc62:function(t,s,e){},e3c5:function(t,s,e){"use strict";var i=e("bc62"),c=e.n(i);c.a},e6ca:function(t,s,e){}}]);