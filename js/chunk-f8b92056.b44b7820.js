(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8b92056"],{"01c4":function(t,e,s){},"0393":function(t,e,s){"use strict";var a=s("9eaf"),r=s.n(a);r.a},"10d1":function(t,e,s){},"184d":function(t,e,s){},"1ac8":function(t,e,s){"use strict";var a=s("ae16"),r=s.n(a);r.a},"33c7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabnav"},[s("swiper",{attrs:{options:t.options}},t._l(t.titles,(function(e,a){return s("swiper-item",{key:e,staticClass:"slide"},[s("a",{staticClass:"tabnav",class:{active:a===t.tabIndex},on:{click:function(e){return e.stopPropagation(),t.tabClick(a)}}},[s("span",{staticClass:"tabnav-text"},[t._v(t._s(e))])])])})),1),t._t("more")],2)},r=[],n=(s("a9e3"),s("d1aa")),i={name:"SearchTabNav",components:{Swiper:n["a"],SwiperItem:n["b"]},props:{titles:{type:Array,default:function(){return[]},required:!0},tabIndex:{type:Number,default:0,required:!0}},data:function(){return{options:{autoplay:"",slidesPerView:"5.3",freeMode:!0}}},methods:{tabClick:function(t){this.$emit("tabClick",t)}}},l=i,o=(s("c9c4"),s("2877")),c=Object(o["a"])(l,a,r,!1,null,"0bb6501c",null);e["a"]=c.exports},"38ec":function(t,e,s){"use strict";var a=s("d10a"),r=s.n(a);r.a},"491b":function(t,e,s){},5549:function(t,e,s){},"5c14":function(t,e,s){},"63f5":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-bar"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"query",staticClass:"iconfont",style:{textAlign:t.isDisabled},attrs:{type:"text",placeholder:" 搜索",disabled:t.disable},domProps:{value:t.query},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.querySubmit(e)},t.querySuggest],input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._t("clear-search")],2)},r=[],n=s("90b9"),i={name:"SearchBar",props:{disable:{type:Boolean,default:!1},value:{type:String,default:""}},data:function(){return{query:""}},computed:{isDisabled:function(){var t;return t=this.disable?"center":"left",t}},methods:{querySubmit:function(){this.$emit("submit",this.query)},querySuggest:Object(n["a"])((function(){this.$emit("suggest",this.query)}),800)},watch:{value:function(t){console.log(t),this.query=t}}},l=i,o=(s("dc55"),s("2877")),c=Object(o["a"])(l,a,r,!1,null,"25c841b2",null);e["a"]=c.exports},"745e":function(t,e,s){"use strict";var a=s("01c4"),r=s.n(a);r.a},"7c48":function(t,e,s){"use strict";var a=s("184d"),r=s.n(a);r.a},"7e2b":function(t,e,s){"use strict";var a=s("acce"),r=s.n(a);r.a},"9b1f":function(t,e,s){"use strict";var a=s("f97a"),r=s.n(a);r.a},"9eaf":function(t,e,s){},abf7:function(t,e,s){"use strict";var a=s("cfdd"),r=s.n(a);r.a},acce:function(t,e,s){},ae16:function(t,e,s){},b46d:function(t,e,s){},c8f1:function(t,e,s){"use strict";var a=s("10d1"),r=s.n(a);r.a},c9c4:function(t,e,s){"use strict";var a=s("5c14"),r=s.n(a);r.a},cb80:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("nav-bar",{staticClass:"nav"},[s("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),s("div",{staticClass:"bar",attrs:{slot:"center"},slot:"center"},[s("search-bar",{ref:"searchBar",on:{submit:t.submit,suggest:t.suggest},nativeOn:{click:function(e){return t.clearSearch(e)}}})],1)]),s(t.currentComponent,t._b({tag:"component",on:{submit:t.submit}},"component",t.currentProps,!1))],1)},r=[],n=(s("b0c0"),s("e47a")),i=s("63f5"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("scroll",[0!==t.keywords.length?s("div",{staticClass:"hot-key"},[s("div",{staticClass:"keyword-header"},[t._v("热搜榜")]),t._l(t.keywords,(function(e,a){return s("div",{key:e.searchWord,staticClass:"keyword-wrapper",on:{click:function(s){return t.submit(e.searchWord)}}},[s("div",{staticClass:"keyword-rank"},[t._v(t._s(a+1))]),s("div",{staticClass:"keyword-summary"},[s("div",{staticClass:"keyword-title-wrapper"},[s("div",{staticClass:"keyword-title"},[t._v(t._s(e.searchWord))]),s("img",{attrs:{src:e.iconUrl}})]),s("div",{staticClass:"keyword-desc"},[t._v(t._s(e.content))])])])}))],2):t._e()])},o=[],c=s("8d33"),u={name:"SearchKeywords",components:{Scroll:c["a"]},props:{keywords:{type:Array,default:function(){return[]}}},methods:{submit:function(t){this.$emit("submit",t)}}},f=u,d=(s("1ac8"),s("2877")),m=Object(d["a"])(f,l,o,!1,null,"8ffe538c",null),p=m.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-suggest"},[s("div",{staticClass:"search-input",on:{click:function(e){return t.submit(t.input)}}},[t._v(" 搜索 "),s("i",{staticClass:"iconfont icon-open-quote"}),t._v(" "+t._s(t.input)+" "),s("i",{staticClass:"iconfont icon-close-quote"})]),t._l(t.suggests,(function(e,a){return s("div",{key:a,staticClass:"wrapper",on:{click:function(s){return t.submit(e.keyword)}}},[s("i",{staticClass:"iconfont icon-search"}),s("span",{staticClass:"result"},[t._v(t._s(e.keyword))])])}))],2)},v=[],b={name:"SearchSuggest",props:{input:{type:String,default:""},suggests:{type:Array,default:function(){return[]}}},methods:{submit:function(t){this.$emit("submit",t)}}},y=b,g=(s("38ec"),Object(d["a"])(y,h,v,!1,null,"e031b928",null)),_=g.exports,k=s("3311");function C(){return Object(k["a"])({url:"/search/hot/detail"})}function w(t){return Object(k["a"])({url:"/search/suggest?type=mobile",params:{keywords:t}})}function x(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(k["a"])({url:"/search",params:{keywords:t,type:e,offset:s}})}var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result"},[s("tab-nav",{attrs:{titles:t.getTabNavTitles,tabIndex:t.tabNavIndex},on:{tabClick:t.tabClick}}),t.loading?s("loading",{attrs:{isShow:t.loading}}):s("scroll",{ref:"scroll",staticClass:"scroll",attrs:{pullUpload:0!==t.tabNavIndex},on:{pullUpload:t.loadMore}},[s(t.currentTab,t._b({tag:"component",on:{changeTabNav:t.tabClick}},"component",t.currentProps,!1))],1)],1)},q=[],$=(s("d81d"),s("b64b"),s("2909")),O=(s("96cf"),s("1da1")),j=s("33c7"),T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result-multi"},[t.songs&&0!==t.songs.length?s("panel-view",{attrs:{title:"单曲",footer:t.results.song.more?t.results.song.moreText:"",btnText:"播放全部"},on:{btnClick:t.btnClick,footerClick:function(e){return t.footerClick(1)}}},[s("song",t._b({ref:"song",attrs:{results:t.songs,isShow:!1}},"song",t.$attrs,!1))],1):t._e(),t.playlists&&0!==t.playlists.length?s("panel-view",{attrs:{title:"歌单",footer:t.results.playList.more?t.results.playList.moreText:""},on:{footerClick:function(e){return t.footerClick(2)}}},[s("playlist",{attrs:{results:t.playlists}})],1):t._e(),t.videos&&0!==t.videos.length?s("panel-view",{attrs:{title:"视频",footer:t.results.video.more?t.results.video.moreText:""},on:{footerClick:function(e){return t.footerClick(5)}},nativeOn:{click:function(e){return t.noFunc(e)}}},[s("videos",{attrs:{results:t.videos}})],1):t._e(),t.sim_querys&&0!==t.sim_querys.length?s("panel-view",{attrs:{title:"相关搜索"}},[s("div",{staticClass:"query"},t._l(t.sim_querys,(function(e){return s("span",{key:e.keyword},[t._v(t._s(e.keyword))])})),0)]):t._e(),t.artists&&0!==t.artists.length?s("panel-view",{attrs:{title:"歌手",footer:t.results.artist.more?t.results.artist.moreText:""},on:{footerClick:function(e){return t.footerClick(3)}}},[s("artist",{attrs:{results:t.artists}})],1):t._e(),t.albums&&0!==t.albums.length?s("panel-view",{attrs:{title:"专辑",footer:t.results.album.more?t.results.album.moreText:""},on:{footerClick:function(e){return t.footerClick(4)}}},[s("album",{attrs:{results:t.albums}})],1):t._e()],1)},N=[],U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.results&&t.results.length>0?s("div",{staticClass:"result-song"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow||t.$attrs.isShow,expression:"isShow || $attrs.isShow"}],staticClass:"play-all iconfont",on:{click:t.play}},[t._v(" "+t._s("")+" 播放全部 ")]),t._l(t.results,(function(e,a){return s("div",{key:e.id,staticClass:"song",on:{click:function(e){return e.stopPropagation(),t.play(a)}}},[s("song-view",{attrs:{padding:"0"}},[s("div",{staticClass:"song-info",attrs:{slot:"center"},slot:"center"},[s("div",{staticClass:"song-name"},[t._v(t._s(e.name))]),s("span",{staticClass:"song-artist"},[t._v(t._s(t.artists(e.artists||e.ar)))]),s("span",{staticClass:"song-album"},[t._v(t._s(e.album?e.album.name:e.al.name))])]),s("i",{staticClass:"iconfont icon-more--line",attrs:{slot:"right"},slot:"right"})])],1)}))],2):t._e()},I=[],A=s("5d86"),P=s("eecb"),E=s("c6fb"),B={name:"SearchSong",components:{SongView:E["a"]},mixins:[P["b"],P["c"],P["f"]],methods:{play:function(t){"number"===typeof t?this.playSong([this.tracks[t]]):this.playSong(this.tracks)}},props:{results:{type:Array,default:function(){return[]},required:!0},isShow:{type:Boolean,default:!0}},watch:{results:{immediate:!0,deep:!0,handler:function(t){var e=this,s=this.getTrackIds(t);Object(A["j"])(s).then((function(t){e.tracks=t.songs}))}}}},V=B,z=(s("abf7"),Object(d["a"])(V,U,I,!1,null,"32198484",null)),L=z.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.results&&t.results.length>0?s("div",{staticClass:"result-playlist"},t._l(t.results,(function(e){return s("div",{key:e.id,staticClass:"playlist",on:{"~click":function(s){return t.goPlaylist(e.id)}}},[s("song-view",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.coverImgUrl),expression:"fmtUrl(playlist.coverImgUrl)"}],staticClass:"playlist-img",attrs:{slot:"left"},slot:"left"}),s("div",{staticClass:"playlist-info",attrs:{slot:"center"},slot:"center"},[s("div",{staticClass:"playlist-name"},[t._v(t._s(e.name))]),s("span",{staticClass:"playlist-track-count"},[t._v(t._s(e.trackCount)+"首音乐")]),s("span",{staticClass:"playlist-creator"},[t._v("by "+t._s("unknown")+",")]),s("span",{staticClass:"playlist-play-count"},[t._v("播放"+t._s(t._f("round")(e.playCount,1))+"次")])])])],1)})),0):t._e()},R=[],D={name:"SearchPlaylist",components:{SongView:E["a"]},mixins:[P["d"],P["g"]],props:{results:{type:Array,default:function(){return[]},required:!0}},methods:{goPlaylist:function(t){this.$router.push("/playlists/".concat(t))}}},F=D,Q=(s("745e"),Object(d["a"])(F,M,R,!1,null,"0ab8cf44",null)),W=Q.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.results&&t.results.length>0?s("div",{staticClass:"result-artist"},t._l(t.results,(function(e){return s("div",{key:e.id,staticClass:"artist",on:{"~click":function(s){return t.goArtist(e.id)}}},[s("song-view",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.picUrl),expression:"fmtUrl(artist.picUrl)"}],staticClass:"artist-img",attrs:{slot:"left"},slot:"left"}),s("div",{staticClass:"artist-name",attrs:{slot:"center"},slot:"center"},[t._v(t._s(e.name))])])],1)})),0):t._e()},K=[],G={name:"SearchArtist",components:{SongView:E["a"]},mixins:[P["d"]],props:{results:{type:Array,default:function(){return[]},required:!0}},methods:{goArtist:function(t){this.$router.push("/artist/".concat(t))}}},H=G,X=(s("c8f1"),Object(d["a"])(H,J,K,!1,null,"18e99145",null)),Y=X.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.results&&t.results.length>0?s("div",{staticClass:"result-album"},t._l(t.results,(function(e){return s("div",{key:e.id,staticClass:"album",on:{"~click":function(s){return t.albumClick(e.id)}}},[s("song-view",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.picUrl),expression:"fmtUrl(album.picUrl)"}],staticClass:"album-img",attrs:{slot:"left"},slot:"left"}),s("div",{attrs:{slot:"center"},slot:"center"},[s("div",{staticClass:"album-name"},[t._v(t._s(e.name))]),s("span",{staticClass:"album-artist"},[t._v(t._s(t.artists(e.artists)))]),s("span",{staticClass:"album-play-count"},[t._v(t._s(t.getDate(e.publishTime)))])])])],1)})),0):t._e()},tt=[],et=(s("99af"),s("90b9")),st={name:"SearchAlbum",components:{SongView:E["a"]},mixins:[P["b"],P["d"],P["g"]],props:{results:{type:Array,default:function(){return[]},required:!0}},methods:{albumClick:function(t){console.log("object"),this.$router.push("/album/".concat(t))}},computed:{getDate:function(){return function(t){var e=Object(et["b"])(t/1e3);return"".concat(e.year,"-").concat(e.month,"-").concat(e.date)}}}},at=st,rt=(s("7c48"),Object(d["a"])(at,Z,tt,!1,null,"e007c24e",null)),nt=rt.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.results&&t.results.length>0?s("div",{staticClass:"result-video",on:{click:t.noFunc}},t._l(t.results,(function(e){return s("div",{key:e.id,staticClass:"video"},[s("div",{staticClass:"wrapper-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.coverUrl),expression:"fmtUrl(video.coverUrl)"}],staticClass:"video-img"}),s("div",{staticClass:"play-count"},[s("i",{staticClass:"iconfont icon-play-s"}),s("span",{staticClass:"play-time"},[t._v(t._s(t._f("round")(e.playTime)))])])]),s("div",{staticClass:"wrapper-right"},[s("div",{staticClass:"video-name"},[t._v(t._s(e.title))]),s("div",{staticClass:"video-desc"},[s("span",{staticClass:"video-track-count"},[t._v(t._s(t.getTime(e.durationms))+", ")]),s("span",{staticClass:"video-creator"},[t._v("by "+t._s(e.creator[0].userName))])])])])})),0):t._e()},lt=[],ot={name:"SearchVideo",mixins:[P["d"],P["g"]],props:{results:{type:Array,default:function(){return[]},required:!0}},computed:{getTime:function(){return function(t){var e=Object(et["c"])(t);return"".concat(e.minutes,":").concat(e.seconds)}}},methods:{noFunc:function(){this.$toast.show("demo不包括视频哦",1e3)}}},ct=ot,ut=(s("9b1f"),Object(d["a"])(ct,it,lt,!1,null,"6d91aae4",null)),ft=ut.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel"},[s("div",{staticClass:"panel-header"},[s("span",{staticClass:"panel-title"},[t._v(t._s(t.title))]),t.btnText.length>0?s("span",{staticClass:"panel-btn",on:{click:t.btnClick}},[t._v(t._s(t.btnText))]):t._e()]),t._t("default"),t.footer.length>0?s("a",{staticClass:"panel-footer",on:{click:t.footerClick}},[t._v(t._s(t.footer)+" "),s("i",{staticClass:"iconfont icon-next"})]):t._e()],2)},mt=[],pt={name:"PanelView",props:{title:{type:String,default:"",required:!0},footer:{type:String,default:""},btnText:{type:String,default:""}},methods:{btnClick:function(){this.$emit("btnClick")},footerClick:function(){this.$emit("footerClick")}}},ht=pt,vt=(s("df97"),Object(d["a"])(ht,dt,mt,!1,null,"185d228c",null)),bt=vt.exports,yt={name:"SearchMulti",components:{PanelView:bt,Song:L,Playlist:W,Artist:Y,Album:nt,Videos:ft},data:function(){return{songs:[],playlists:[],videos:[],sim_querys:[],artists:[],albums:[]}},props:{results:{type:[Object,Array],default:function(){},required:!0}},methods:{btnClick:function(){this.$refs.song.play()},footerClick:function(t){this.$emit("changeTabNav",t)},noFunc:function(){this.$toast.show("demo不包括视频哦",1e3)}},watch:{results:{immediate:!0,deep:!0,handler:function(t){t&&(this.albums=t.album?t.album.albums:[],this.artists=t.artist?t.artist.artists:[],this.playlists=t.playList?t.playList.playLists:[],this.songs=t.song?t.song.songs:[],this.videos=t.video?t.video.videos:[],this.sim_querys=t.sim_query?t.sim_query.sim_querys:[])}}}},gt=yt,_t=(s("ed4c"),Object(d["a"])(gt,T,N,!1,null,"68f76fe1",null)),kt=_t.exports,Ct={name:"SearchResult",components:{Scroll:c["a"],NavBar:n["a"],SearchBar:i["a"],TabNav:j["a"]},mixins:[P["e"]],data:function(){return{results:{multi:{name:"综合",id:1018,list:[]},songs:{name:"单曲",id:1,list:[]},playlists:{name:"歌单",id:1e3,list:[]},artists:{name:"歌手",id:100,list:[]},albums:{name:"专辑",id:10,list:[]},videos:{name:"视频",id:1014,list:[]}},tabNavIndex:0}},created:function(){var t=this;Object.keys(this.results).map((function(e){x(t.query,t.results[e].id).then((function(s){t.results[e].list=s.result}))}))},props:{query:{type:String,default:"",required:!0}},beforeRouteLeave:function(t,e,s){t.meta.prevQuery=this.query,t.meta.searchTabIndex=this.tabNavIndex,s()},methods:{goBack:function(){this.$router.go(-1)},loadMore:function(){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.tabNavIndex){e.next=7;break}return s=Object.keys(t.results)[t.tabNavIndex],a=t.results[s].id,r=t.results[s].list[s].length,e.next=6,x(t.query,a,r).then((function(e){var a;(console.log(e.result),e.result.hasMore||e.result[s].length)?((a=t.results[s].list[s]).push.apply(a,Object($["a"])(e.result[s])),console.log("数据请求完毕")):(t.$refs.scroll.loading=!1,console.log("没有数据了"))}));case 6:t.$refs.scroll.finishPullUp();case 7:case"end":return e.stop()}}),e)})))()},tabClick:function(t){this.tabNavIndex=t,this.$refs.scroll.scrollTo(0,0),this.$refs.scroll.refresh()}},computed:{currentTab:function(){var t;switch(this.tabNavIndex){case 0:t=kt;break;case 1:t=L;break;case 2:t=W;break;case 3:t=Y;break;case 4:t=nt;break;case 5:t=ft;break;default:t=kt}return t},currentProps:function(){var t;switch(this.tabNavIndex){case 0:t={results:this.results.multi.list};break;case 1:t={results:this.results.songs.list.songs};break;case 2:t={results:this.results.playlists.list.playlists};break;case 3:t={results:this.results.artists.list.artists};break;case 4:t={results:this.results.albums.list.albums};break;case 5:t={results:this.results.videos.list.videos};break;default:t={results:this.results.multi.list};break}return t},getTabNavTitles:function(){var t=this,e=Object.keys(this.results).map((function(e){return t.results[e].name}));return e}},watch:{results:{deep:!0,handler:function(){this.$nextTick((function(){this.loading=!1}))}}}},wt=Ct,xt=(s("7e2b"),Object(d["a"])(wt,S,q,!1,null,"00aab4cb",null)),St=xt.exports,qt={name:"Search",components:{NavBar:n["a"],SearchBar:i["a"],SearchKeywords:p},data:function(){return{prevPath:"",query:"",keywords:[],suggests:[],goSearch:!1}},methods:{clearSearch:function(){this.query="",this.goSearch=!1},goBack:function(){this.$router.push("/recommend")},submit:function(t){this.query=t,this.goSearch=!0},suggest:function(t){var e=this;this.query=t,t?w(t).then((function(t){return e.suggests=t.result.allMatch})):this.suggests=[]}},beforeRouteEnter:function(t,e,s){s((function(t){"playlist"===e.name&&(t.query=e.meta.prevQuery,t.goSearch=!0)}))},beforeRouteLeave:function(t,e,s){"playlist"===t.name&&(t.meta.prevQuery=this.query),s()},created:function(){var t=this;C().then((function(e){return t.keywords=e.data}))},computed:{currentComponent:function(){var t;return t=this.suggests&&0!==this.suggests.length?_:p,this.goSearch&&(t=St),t},currentProps:function(){var t;return t=this.suggests&&0!==this.suggests.length?{suggests:this.suggests,input:this.query}:{keywords:this.keywords},this.goSearch&&(t={query:this.query}),t}},watch:{query:{immediate:!0,handler:function(t){t&&(this.$refs.searchBar.query=t)}}}},$t=qt,Ot=(s("0393"),Object(d["a"])($t,a,r,!1,null,"5958ff27",null));e["default"]=Ot.exports},cfdd:function(t,e,s){},d10a:function(t,e,s){},dc55:function(t,e,s){"use strict";var a=s("5549"),r=s.n(a);r.a},df97:function(t,e,s){"use strict";var a=s("491b"),r=s.n(a);r.a},ed4c:function(t,e,s){"use strict";var a=s("b46d"),r=s.n(a);r.a},f97a:function(t,e,s){}}]);