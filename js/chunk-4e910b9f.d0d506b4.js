(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e910b9f"],{"1eb9":function(t,e,s){"use strict";var i=s("d122"),a=s.n(i);a.a},"375e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{"--position":t.popUp?"fixed":"relative"},attrs:{id:"mine"},on:{click:function(e){return e.stopPropagation(),t.screenClick(e)}}},[i("nav-bar",{staticClass:"nav"}),i("div",{staticClass:"top-display"},[t.isLogin?i("img",{staticClass:"avatar",attrs:{src:t.fmtUrl(t.profile.avatar)}}):i("img",{staticClass:"avatar",attrs:{src:s("bd11")}}),i("span",{staticClass:"nickname"},[t._v(t._s(t.isLogin?t.profile.nickname:"登录立享多端同步"))]),t.isLogin?t._e():i("span",{staticClass:"login-btn",on:{click:t.loginClick}},[t._v("立即登录")])]),i("div",{staticClass:"mine-wrapper"},[i("scroll",[i("div",{staticClass:"header"},[t._v("我的音乐")]),i("div",{staticClass:"panel-wrapper"},[i("div",{staticClass:"panel like",on:{click:t.myFavListClick}},[i("i",{staticClass:"iconfont icon-heart-filled"}),i("div",{staticClass:"text"},[t._v("我喜欢的音乐")])]),i("div",{staticClass:"panel",on:{click:t.play}},[i("i",{staticClass:"iconfont icon-radio2"}),i("div",{staticClass:"text"},[t._v("私人FM")])])]),i("slider-display",{ref:"slider",staticClass:"slider",attrs:{title:"最近播放",isSong:!0,sliderOption:{slidesPerView:2.1,slidesPerColumn:1},items:t.getSlicedSongs,changeIcon:"icon-play-btn"}},[i("div",{staticClass:"more",attrs:{slot:"more"},on:{click:function(e){return e.stopPropagation(),t.toggleRecentlyPlayed(e)}},slot:"more"},[t._v(" 更多 "),i("i",{staticClass:"iconfont icon-next"})])]),t.historyList.length?t._e():i("div",{staticClass:"no-content",style:{color:t.isLogin?"#4d7daf":"#ccc"}},[t._v(" 快开启音乐之旅吧! ")]),i("div",{staticClass:"header"},[t._l(t.tabbar,(function(e,s){return i("span",{key:s,class:{inactive:t.activeTab!==s},on:{click:function(e){return t.tabClick(s)}}},[t._v(t._s(e))])})),i("div",{staticClass:"icons"},[i("i",{staticClass:"iconfont icon-plus",on:{click:function(e){return e.stopPropagation(),t.togglePopUp(e)}}}),i("i",{staticClass:"iconfont icon-setting",on:{click:function(e){return e.stopPropagation(),t.toggleEditPlaylist(e)}}})])],2),t.currentPlaylist.length?i("div",{staticClass:"playlist-wrapper"},t._l(t.currentPlaylist,(function(e){return i("div",{key:e.id,staticClass:"playlist",on:{click:function(s){return t.playlistClick(e.id)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.coverImgUrl),expression:"fmtUrl(item.coverImgUrl)"}],staticClass:"playlist-img"}),i("div",{staticClass:"desc"},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"count"},[t._v(t._s(e.trackCount)+"首")])])])})),0):t._e(),t.playlist.length?t._e():i("div",{staticClass:"no-content",style:{color:t.isLogin?"#4d7daf":"#ccc"}},[t._v(" 新建歌单 ")])],1)],1),i("transition",{attrs:{name:"right"}},[t.showRecentlyPlayed?i("recently-played"):t._e()],1),i("transition",{attrs:{name:"right"}},[t.showEditPlaylist?i("edit-playlist",{attrs:{playlists:t.currentPlaylist,type:t.activeTab}}):t._e()],1),i("transition",{attrs:{name:"slide"}},[i("pop-up",{directives:[{name:"show",rawName:"v-show",value:t.popUp,expression:"popUp"}],ref:"popup",staticClass:"pop-up",on:{cancel:t.togglePopUp,submit:t.createList}})],1)],1)},a=[],n=(s("4de4"),s("a15b"),s("d81d"),s("fb6a"),s("b0c0"),s("96cf"),s("1da1")),l=s("2909"),c=s("5530"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pop-up"},[s("div",{staticClass:"header"},[s("span",{on:{click:t.cancel}},[t._v("取消")]),s("span",{staticClass:"title"},[t._v("新建歌单")]),s("span",{on:{click:t.submit}},[t._v("完成")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.playlistName,expression:"playlistName"}],attrs:{type:"text",placeholder:"歌单标题"},domProps:{value:t.playlistName},on:{input:function(e){e.target.composing||(t.playlistName=e.target.value)}}})])},r=[],p={name:"MinePopUp",data:function(){return{playlistName:""}},methods:{cancel:function(){this.$emit("cancel")},submit:function(){this.$emit("submit",this.playlistName)}}},u=p,d=(s("9e7d"),s("2877")),h=Object(d["a"])(u,o,r,!1,null,"37168fc2",null),f=h.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recently-played"},[s("nav-bar",{staticClass:"nav"},[s("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),s("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},[t._v("最近播放")])]),s("div",{staticClass:"tools"},[t.multiSelect?t._e():s("div",{staticClass:"play-all",on:{click:function(e){return e.stopPropagation(),t.play()}}},[s("i",{staticClass:"iconfont icon-play"}),s("span",{staticClass:"tool-header"},[t._v("播放全部")])]),t.multiSelect?t._e():s("div",{staticClass:"multi-select",on:{click:function(e){return e.stopPropagation(),t.toggleSelect(e)}}},[s("i",{staticClass:"iconfont icon-select-list"}),s("span",[t._v("多选")])]),t.multiSelect?s("div",{staticClass:"select-all",attrs:{slot:"left"},on:{click:function(e){return e.stopPropagation(),t.toggleCheck(e)}},slot:"left"},[s("i",{staticClass:"iconfont",class:t.checkall?"icon-select-fill":"icon-select-unfill"}),s("span",{staticClass:"tool-header"},[t._v("全部")])]):t._e(),t.multiSelect?s("div",{staticClass:"close-select",attrs:{slot:"right"},on:{click:function(e){return e.stopPropagation(),t.toggleSelect(e)}},slot:"right"},[t._v(" 完成 ")]):t._e()]),s("scroll",t._l(t.historyList,(function(e,i){return s("div",{key:e.id,staticClass:"song-wrapper"},[s("song-view",[t.multiSelect?s("i",{staticClass:"iconfont ",class:t.checkedList.includes(e.id)?"icon-select-fill":"icon-select-unfill",attrs:{slot:"left"},on:{click:function(s){return t.check(e.id)}},slot:"left"}):t._e(),s("div",{staticClass:"song-desc",attrs:{slot:"center"},on:{click:function(e){return t.play(i)}},slot:"center"},[s("div",{staticClass:"title"},[t._v(t._s(e.name))]),s("span",{staticClass:"artist"},[t._v(t._s(t.artists(e.ar)))]),s("span",{staticClass:"album"},[t._v(t._s(e.al.name))])]),s("i",{staticClass:"iconfont icon-more--line",attrs:{slot:"right"},on:{click:function(s){return s.stopPropagation(),t.songClick(e)}},slot:"right"})])],1)})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.multiSelect,expression:"multiSelect"}],staticClass:"select-toolbar",class:{active:t.checkedList.length}},[s("div",{staticClass:"play-next",on:{click:t.addToPlayer}},[s("i",{staticClass:"iconfont icon-add-next"}),s("p",[t._v("下一首播放")])]),s("div",{staticClass:"add-to-playlist",on:{click:t.selectPlaylist}},[s("i",{staticClass:"iconfont icon-add"}),s("p",[t._v("收藏到歌单")])])]),s("more-song-options",{directives:[{name:"show",rawName:"v-show",value:t.song&&Object.keys(t.song).length|t.checkedList.length,expression:"song && Object.keys(song).length | checkedList.length"}],ref:"trackPopUp",attrs:{song:t.song}})],1)},m=[],v=(s("caad"),s("2532"),s("e47a")),y=s("8d33"),k=s("c6fb"),C=s("eecb"),w=s("6ae1"),b=s("5d86"),_=s("2f62"),P={name:"MineRecentlyPlayed",components:{NavBar:v["a"],Scroll:y["a"],SongView:k["a"],MoreSongOptions:w["a"]},mixins:[C["b"],C["f"],C["h"],C["c"]],data:function(){return{song:{},multiSelect:!1,checkall:!1}},computed:Object(c["a"])({},Object(_["c"])(["historyList"])),methods:{addToPlayer:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.checkedList.length&&(s=t.historyList.filter((function(e){return t.checkedList.includes(e.id)}))),i=t.getTrackIds(s),e.next=4,Object(b["j"])(i).then((function(e){t.$refs.trackPopUp.addToPlayer("",e.songs)}));case 4:t.unCheckAll(),t.checkall=!1;case 6:case"end":return e.stop()}}),e)})))()},selectPlaylist:function(){var t=this.checkedList.join(",");this.$refs.trackPopUp.selectPlaylist("",t)},goBack:function(){this.$parent.toggleRecentlyPlayed()},play:function(t){this.playSong(this.historyList,t)},songClick:function(t){this.song=t,this.$refs.trackPopUp.showMore=!0},toggleSelect:function(){this.multiSelect=!this.multiSelect,this.unCheckAll(),this.checkall=!1},toggleCheck:function(){this.checkall?this.unCheckAll():this.checkAll(this.historyList),this.checkall=!this.checkall}}},x=P,L=(s("4a77"),Object(d["a"])(x,g,m,!1,null,"941d429c",null)),S=L.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-playlist"},[s("nav-bar",{staticClass:"nav",attrs:{isDisabled:!0}},[s("span",{attrs:{slot:"left"},on:{click:function(e){return e.stopPropagation(),t.toggleCheckAll(e)}},slot:"left"},[t._v(t._s(t.checkedList.length?"取消全选":"全选"))]),s("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},[t._v("管理歌单")]),s("span",{attrs:{slot:"right"},on:{click:function(e){return e.stopPropagation(),t.goBack(e)}},slot:"right"},[t._v("完成")])]),s("scroll",t._l(t.playlists,(function(e){return s("div",{key:e.id,staticClass:"playlist-wrapper",on:{click:function(s){return t.check(e.id)}}},[s("song-view",[s("i",{staticClass:"iconfont ",class:t.checkedList.includes(e.id)?"icon-select-fill":"icon-select-unfill",attrs:{slot:"left"},slot:"left"}),s("div",{staticClass:"playlist-info",attrs:{slot:"center"},slot:"center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.coverImgUrl,expression:"playlist.coverImgUrl"}]}),s("div",{staticClass:"playlist-desc"},[s("div",{staticClass:"playlist-title"},[t._v(t._s(e.name))]),s("span",{staticClass:"playlist-count"},[t._v(t._s(e.trackCount+"首"))])])])])],1)})),0),s("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deletePlaylist(e)}}},[s("i",{staticClass:"iconfont icon-trash"}),s("span",[t._v("删除")])])],1)},O=[],U=(s("a9e3"),s("d3b7"),s("3ca3"),s("ddb0"),s("d324")),$={name:"MineEditPlaylist",mixins:[C["h"]],components:{NavBar:v["a"],Scroll:y["a"],SongView:k["a"]},props:{playlists:{type:Array,default:function(){return[]}},type:{type:Number,default:0}},computed:Object(c["a"])({},Object(_["c"])(["cookie"])),methods:{goBack:function(){this.$parent.toggleEditPlaylist()},deletePlaylist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.checkedList.join(","),t.type){e.next=6;break}return e.next=4,Object(U["c"])(s,t.cookie).then((function(e){200===e.code?(t.$toast.show("歌单已删除",1e3),t.$parent.getMyLists()):t.$toast.show("歌单删除失败,请重试",1e3)}));case 4:e.next=10;break;case 6:return i=0,e.next=9,Promise.all(t.checkedList.map(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(U["k"])(2,s,t.cookie).then((function(t){200===t.code&&(i++,console.log(i))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:i===t.checkedList.length?(t.$toast.show("歌单已删除",1e3),t.$parent.getMyLists()):t.$toast.show("歌单删除失败,请重试",1e3);case 10:case"end":return e.stop()}}),e)})))()},toggleCheckAll:function(){this.checkedList.length?this.unCheckAll():this.checkAll(this.playlists)}}},N=$,R=(s("9a72"),Object(d["a"])(N,j,O,!1,null,"348ddfea",null)),I=R.exports,E=s("cc3f"),M={name:"Mine",components:{PopUp:f,RecentlyPlayed:S,EditPlaylist:I,Scroll:y["a"],NavBar:v["a"],SliderDisplay:E["a"]},mixins:[C["d"],C["f"],C["c"]],data:function(){return{songs:[],playlist:[],tabbar:["创建歌单","收藏歌单"],activeTab:0,popUp:!1,fm:[],showRecentlyPlayed:!1,showEditPlaylist:!1}},created:function(){var t=this;if(this.isLogin&&this.cookie&&this.profile.uid){var e=JSON.parse(window.localStorage.getItem("historyList"));e.length&&this.setHistoryList(e),Object(U["d"])(this.cookie).then((function(e){e.data.map((function(e){t.fm.push({id:e.id,name:e.name,al:{picUrl:e.album.picUrl},ar:[{name:e.artists.map((function(t){return t.name})).join(" / ")}]})}))})),this.getMyLists()}},computed:Object(c["a"])(Object(c["a"])({},Object(_["c"])(["isLogin","cookie","profile","historyList"])),{},{currentPlaylist:function(){var t,e=this;if(0===this.activeTab){var s=this.playlist.filter((function(t){return t.creator.userId===e.profile.uid}));t=s.slice(1)}else t=this.playlist.filter((function(t){return t.creator.userId!==e.profile.uid}));return t},getSlicedSongs:function(){var t=Object(l["a"])(this.historyList).reverse();return t.slice(0,3)},getSlicedPlaylist:function(){return this.playlist.slice(1)}}),watch:{playlist:{deep:!0,handler:function(t){console.log(t)}}},methods:Object(c["a"])(Object(c["a"])({},Object(_["b"])(["setHistoryList"])),{},{createList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(U["b"])(t,e.cookie).then((function(t){console.log(t),200===t.code?(e.$toast.show("创建成功",500),e.$router.push("/playlists/".concat(t.id))):e.$toast.show("创建歌单失败, 请重试",1e3)}));case 2:e.togglePopUp();case 3:case"end":return s.stop()}}),s)})))()},getMyLists:function(){var t=this;console.log("getting playlists"),Object(U["f"])(this.profile.uid,this.cookie).then((function(e){t.playlist=e.playlist}))},loginClick:function(){this.$router.push("/account")},myFavListClick:function(){this.$router.push("/playlists/".concat(this.playlist[0].id))},noFunc:function(){this.$toast.show("功能还没完成哦",1e3)},playlistClick:function(t){this.$router.push("/playlists/".concat(t))},play:function(){this.playSong(this.fm)},screenClick:function(t){if(this.popUp){var e=window.innerHeight-this.$refs.popup.$el.clientHeight;t.clientY<e&&(this.popUp=!1)}},toggleEditPlaylist:function(){this.currentPlaylist.length||this.$toast.show("请先添加歌单至收藏哦",1e3),this.showEditPlaylist=!this.showEditPlaylist},tabClick:function(t){this.activeTab=t},togglePopUp:function(){this.popUp=!this.popUp},toggleRecentlyPlayed:function(){this.historyList.length?this.showRecentlyPlayed=!this.showRecentlyPlayed:this.isLogin?this.$toast.show("您还没开始听歌哦",1e3):this.$toast.show("请先登录",1e3)}})},A=M,T=(s("3d4c"),Object(d["a"])(A,i,a,!1,null,"79faad27",null));e["default"]=T.exports},"3d4c":function(t,e,s){"use strict";var i=s("f37a"),a=s.n(i);a.a},"43b9":function(t,e,s){},"4a77":function(t,e,s){"use strict";var i=s("54a0"),a=s.n(i);a.a},"54a0":function(t,e,s){},6692:function(t,e,s){},"9a72":function(t,e,s){"use strict";var i=s("43b9"),a=s.n(i);a.a},"9e7d":function(t,e,s){"use strict";var i=s("6692"),a=s.n(i);a.a},bd11:function(t,e,s){t.exports=s.p+"img/user_default.27f38aa8.png"},cc3f:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slide-display"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._t("more")],2),t.items&&t.items.length>0?s("swiper",{ref:"banner",attrs:{options:t.options}},t._l(t.items,(function(e,i){return s("swiper-item",{key:e.id},[t.isSong?t._e():s("a",{staticClass:"swiper-item-wrapper",on:{click:function(s){return t.itemClick(e.id)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.coverImgUrl),expression:"fmtUrl(item.coverImgUrl)"}],staticClass:"swiper-item-img"}),s("span",{staticClass:"swiper-item-text"},[t._v(t._s(e.name))]),e.playCount?s("span",{staticClass:"swiper-item-playcount"},[s("i",{staticClass:"iconfont icon-play-s"}),t._v(" "+t._s(t._f("round")(e.playCount))+" ")]):t._e()]),t.isSong?s("a",{staticClass:"swiper-item-wrapper",on:{click:function(e){return t.play(i)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.al.picUrl),expression:"fmtUrl(item.al.picUrl)"}],staticClass:"swiper-item-img"}),s("div",{staticClass:"swiper-item-desc"},[s("span",{staticClass:"swiper-item-text"},[t._v(t._s(e.name))]),e.ar?s("div",{staticClass:"swiper-item-author"},[s("span",[t._v(t._s(t.artists(e.ar)))])]):t._e()]),e.ar&&e.al?s("i",{staticClass:"iconfont",class:t.changeIcon?t.changeIcon:"icon-play"}):t._e()]):t._e()])})),1):t._e()],1)},a=[],n=(s("96cf"),s("1da1")),l=s("d1aa"),c=s("eecb"),o=s("5d86"),r={name:"SliderDisplay",mixins:[c["g"],c["b"],c["d"],c["f"],c["c"]],components:{Swiper:l["a"],SwiperItem:l["b"]},props:{items:{type:Array,default:function(){return[]}},title:{type:String,default:""},isSong:{type:Boolean,default:!1},changeIcon:{type:String,default:""},sliderOption:{type:Object,default:function(){}}},data:function(){return{songClicked:!1,options:this.isSong?Object.assign({freemode:!0,autoplay:"",slidesPerView:1.1,slidesPerColumn:3},this.sliderOption):{freemode:!0,autoplay:"",slidesPerView:3.3,spaceBetween:30}}},methods:{itemClick:function(t){this.$emit("itemClick",t)},play:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.$parent.$parent.historyList){s.next=6;break}return i=e.getTrackIds(e.items),s.next=4,Object(o["j"])(i).then((function(s){e.playSong(s.songs,t)}));case 4:s.next=7;break;case 6:e.playSong(e.items,t);case 7:case"end":return s.stop()}}),s)})))()}}},p=r,u=(s("1eb9"),s("2877")),d=Object(u["a"])(p,i,a,!1,null,"27e738c8",null);e["a"]=d.exports},d122:function(t,e,s){},f37a:function(t,e,s){}}]);