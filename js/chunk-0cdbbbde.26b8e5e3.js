(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cdbbbde"],{a359:function(t,a,i){"use strict";var n=i("db37"),r=i.n(n);r.a},be53:function(t,a,i){"use strict";var n=i("ee0d"),r=i.n(n);r.a},db37:function(t,a,i){},df28:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"radio-toplist"},[i("nav-bar",{staticClass:"nav"},[i("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),i("div",{attrs:{slot:"center"},slot:"center"},[t._v("主播电台排行榜")])]),i("div",{staticClass:"tabbar"},t._l(t.tabnav,(function(a,n){return i("span",{key:a+n,class:{active:t.activeTab===n},on:{click:function(a){return t.tabClick(n)}}},[t._v(t._s(a))])})),0),i("scroll",[i("loading",{attrs:{isShow:t.loading}}),i("toplist-view",t._b({on:{contentLoaded:t.contentLoaded}},"toplist-view",t.currentProp,!1))],1)],1)},r=[],e=(i("99af"),i("96cf"),i("1da1")),o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.toplist&&t.toplist.length?i("div",{staticClass:"radio-toplist-view"},[i("div",{staticClass:"header"},[t._v(t._s(t.title))]),t._l(t.toplist,(function(a,n){return i("div",{key:a.rank,staticClass:"toplist-wrapper",on:{click:function(i){i.stopPropagation(),t.isRadio?t.toRadio(a.id):t.playProgram(n)}}},[i("div",{staticClass:"rank-wrapper"},[i("div",{staticClass:"rank"},[t._v(t._s(1===t.toplist[0].rank?a.rank:a.rank-1))]),i("div",{staticClass:"rank-stat"},[t.rankStat(a)&&-1!==a.lastRank?i("i",{staticClass:"iconfont",class:t.rankStat(a)>0?"icon-up":"icon-down"}):t._e(),i("span",{class:{new:-1===a.lastRank}},[t._v(t._s(-1!==a.lastRank?1*t.rankStat(a)>=0?0===t.rankStat(a)?"-":t.rankStat(a):-1*t.rankStat(a):"new"))])])]),i("div",{staticClass:"program-wrapper"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.isRadio?t.fmtUrl(a.picUrl):t.fmtUrl(a.program.coverUrl),expression:"isRadio ? fmtUrl(item.picUrl) : fmtUrl(item.program.coverUrl)"}],style:[{height:t.isRadio?"250px":"100px"},{width:t.isRadio?"250px":"100px"}]}),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(t.isRadio?a.name:a.program.name))]),i("div",{staticClass:"desc",class:{isRadio:t.isRadio}},[t.isRadio?t._e():i("div",{staticClass:"dj-wrapper"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(a.program.dj.avatarUrl),expression:"fmtUrl(item.program.dj.avatarUrl)"}]}),i("span",{staticClass:"dj-name"},[t._v(t._s(a.program.dj.nickname))])]),t.isRadio?i("div",{staticClass:"radio-desc"},[i("div",{staticClass:"dj-name"},[t._v(t._s(a.dj.nickname))])]):t._e(),i("div",{staticClass:"score-wrapper"},[i("i",{staticClass:"iconfont icon-hot"}),i("span",{staticClass:"score"},[t._v(t._s(t._f("round")(a.score,1)))])])])])]),t.isRadio?t._e():i("i",{staticClass:"iconfont icon-play"})])}))],2):t._e()},s=[],c=(i("d81d"),i("b0c0"),i("eecb")),l={name:"RadioToplistView",mixins:[c["d"],c["g"],c["f"]],data:function(){return{tracks:[]}},props:{toplist:{type:Array,default:function(){return[]},required:!0},title:{type:String,required:!0,default:""},isRadio:{type:Boolean,default:!1}},computed:{rankStat:function(){return function(t){return t.lastRank-t.rank}}},watch:{toplist:{deep:!0,handler:function(){this.$nextTick((function(){console.log("子组件数据接收完毕"),this.$emit("contentLoaded")})),this.isRadio||this.$nextTick((function(){var t=this;this.tracks=[],this.toplist.map((function(a){t.tracks.push({id:a.program.mainSong.id,name:a.program.name,al:{picUrl:a.program.coverUrl},ar:[{name:a.program.radio.name}]})}))}))}}},methods:{toRadio:function(t){this.$router.push("/radio/program/".concat(t))},playProgram:function(t){this.playSong(this.tracks,t)}}},d=l,u=(i("a359"),i("2877")),p=Object(u["a"])(d,o,s,!1,null,"50b5bf23",null),f=p.exports,m=i("e47a"),v=i("8d33"),h=i("90b9"),b=i("ed72"),g={name:"RadioToplist",mixins:[c["e"]],components:{ToplistView:f,NavBar:m["a"],Scroll:v["a"]},data:function(){return{daily:[],program:[],radio:[],tabnav:["24小时榜","节目榜","电台榜"],activeTab:1}},created:function(){var t=this;return Object(e["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(b["f"])().then((function(a){t.program=a.toplist,console.log("program loaded")}));case 2:return a.next=4,Object(b["h"])().then((function(a){t.radio=a.toplist,console.log("radio loaded")}));case 4:return a.next=6,Object(b["c"])().then((function(a){t.daily=a.data,console.log("daily loaded")}));case 6:case"end":return a.stop()}}),a)})))()},methods:{contentLoaded:function(){this.loading=!1,console.log("父组件收到了")},goBack:function(){this.$router.push("/radio")},tabClick:function(t){this.loading?this.$toast.show("正在努力加载哦",1e3):this.activeTab=t}},computed:{currentProp:function(){var t;switch(this.activeTab){case 0:t={toplist:this.daily.list,title:"更新时间: "+this.getDate};break;case 1:t={toplist:this.program,title:"最热节目"};break;case 2:t={toplist:this.radio,title:"最热电台",isRadio:!0};break}return t},getDate:function(){var t=Object(h["b"])(this.daily.updateTime/1e3);return"".concat(t.month,"月").concat(t.date,"日")}}},k=g,j=(i("be53"),Object(u["a"])(k,n,r,!1,null,"452d3ad6",null));a["default"]=j.exports},ed72:function(t,a,i){"use strict";i.d(a,"a",(function(){return r})),i.d(a,"i",(function(){return e})),i.d(a,"b",(function(){return o})),i.d(a,"d",(function(){return s})),i.d(a,"f",(function(){return c})),i.d(a,"c",(function(){return l})),i.d(a,"h",(function(){return d})),i.d(a,"g",(function(){return u})),i.d(a,"e",(function(){return p}));var n=i("3311");function r(){return Object(n["a"])({url:"/dj/banner"})}function e(){return Object(n["a"])({url:"/dj/category/recommend"})}function o(){return Object(n["a"])({url:"/dj/catelist"})}function s(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(n["a"])({url:"/dj/radio/hot",params:{cateId:t,offset:a}})}function c(){return Object(n["a"])({url:"/dj/program/toplist"})}function l(){return Object(n["a"])({url:"/dj/program/toplist/hours"})}function d(){return Object(n["a"])({url:"/dj/toplist?type=hot"})}function u(t){return Object(n["a"])({url:"/dj/detail",params:{rid:t}})}function p(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return Object(n["a"])({url:"/dj/program",params:{rid:t,limit:a}})}},ee0d:function(t,a,i){}}]);