(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eea8591a"],{"5a86":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"d",(function(){return s})),i.d(e,"e",(function(){return n})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return c}));var a=i("3311");function r(t){return Object(a["a"])({url:"/artists/",params:{id:t}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(a["a"])({url:"/artist/list",params:{type:t,area:e,offset:i}})}function n(t){return Object(a["a"])({url:"/artist/top/song",params:{id:t}})}function l(t){return Object(a["a"])({url:"/artist/desc",params:{id:t}})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return Object(a["a"])({url:"/artist/album",params:{id:t,limit:e}})}},"6ec1":function(t,e,i){},"6f6a":function(t,e,i){"use strict";var a=i("6ec1"),r=i.n(a);r.a},9949:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"artist"},[i("router-view"),i("nav-bar",{staticClass:"nav"},[i("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),i("div",{attrs:{slot:"center"},slot:"center"},[t._v("歌手分类")])]),i("div",{staticClass:"filter-wrapper"},[i("div",{staticClass:"filter-area"},t._l(t.areas,(function(e,a){return i("span",{key:e.title,staticClass:"area",class:{active:e.area===t.filter[1]},on:{click:function(e){return t.areaFilter(a)}}},[t._v(t._s(e.title))])})),0),i("div",{staticClass:"filter-type"},t._l(t.types,(function(e,a){return i("span",{key:e.title,staticClass:"type",class:{active:e.type===t.filter[0]},on:{click:function(e){return t.typeFilter(a)}}},[t._v(t._s(e.title))])})),0)]),i("div",{staticClass:"header"},[t._v("热门歌手")]),t.loading?i("loading",{attrs:{isShow:t.loading}}):i("scroll",{ref:"scroll",attrs:{pullUpload:!0},on:{pullUpload:t.loadMore}},t._l(t.artists,(function(e){return i("div",{key:e.id,staticClass:"artist-wrapper",on:{click:function(i){return t.artistClick(e)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(e.picUrl),expression:"fmtUrl(artist.picUrl)"}]}),i("span",{staticClass:"name"},[t._v(t._s(e.name))])])})),0)],1)},r=[],s=(i("4de4"),i("2909")),n=(i("96cf"),i("1da1")),l=i("8d33"),c=i("e47a"),o=i("eecb"),u=i("5a86"),f={name:"Artist",components:{NavBar:c["a"],Scroll:l["a"]},mixins:[o["e"],o["d"]],created:function(){var t=this;Object(u["d"])().then((function(e){t.artists=e.artists}))},data:function(){return{artists:[],types:[{type:1,title:"男歌手"},{type:2,title:"女歌手"},{type:3,title:"乐队/组合"}],areas:[{area:7,title:"华语"},{area:96,title:"欧美"},{area:8,title:"日本"},{area:16,title:"韩国"},{area:0,title:"其他"}],filter:[-1,-1]}},methods:{areaFilter:function(t){this.filter.area!==this.areas[t]&&this.$set(this.filter,1,this.areas[t].area)},artistClick:function(t){console.log(t),this.$router.push({name:"artist-info",params:{uid:t.accountId,id:t.id}})},goBack:function(){this.$router.push("/recommend")},typeFilter:function(t){this.filter.type!==this.types[t]&&this.$set(this.filter,0,this.types[t].type)},loadMore:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.artists.length,e.next=3,Object(u["d"])(t.filter[0],t.filter[1],i).then((function(e){var i;e.more||e.artists.length?((i=t.artists).push.apply(i,Object(s["a"])(e.artists)),console.log(t.artists),console.log("数据请求完毕")):(t.$refs.scroll.loading=!1,console.log("没有数据了"))}));case 3:t.$refs.scroll.finishPullUp();case 4:case"end":return e.stop()}}),e)})))()}},watch:{filter:{deep:!0,handler:function(){var t=this;console.log(this.filter),this.loading=!0,Object(u["d"])(this.filter[0],this.filter[1]).then((function(e){t.artists=e.artists}))}},artists:{deep:!0,handler:function(){this.$nextTick((function(){this.loading=!1}))}}}},d=f,p=(i("6f6a"),i("2877")),h=Object(p["a"])(d,a,r,!1,null,"1d0bd808",null);e["default"]=h.exports}}]);