(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36e4781a"],{"17b0":function(t,n,e){"use strict";var s=e("bc44"),o=e.n(s);o.a},"20ec":function(t,n,e){"use strict";var s=e("80de"),o=e.n(s);o.a},"6a3e":function(t,n,e){"use strict";var s=e("bbd9"),o=e.n(s);o.a},"80de":function(t,n,e){},8112:function(t,n,e){},"95c7":function(t,n,e){"use strict";var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"scroll-view",style:{"--height":t.height}},[e("div",{ref:"cover",staticClass:"cover"},[t._t("cover")],2),e("div",{staticClass:"tools"},[t._t("tab"),e("div",{staticClass:"left-tool"},[t._t("left")],2),e("div",{staticClass:"right-tool"},[t._t("right")],2)],2),e("scroll",[t._t("component")],2)],1)},o=[],a=e("8d33"),r={name:"ScrollView",components:{Scroll:a["a"]},props:{height:{type:String,default:"35%"}}},i=r,c=(e("17b0"),e("2877")),l=Object(c["a"])(i,s,o,!1,null,"970440dc",null);n["a"]=l.exports},bbd9:function(t,n,e){},bc44:function(t,n,e){},bfc5:function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"program"},[e("nav-bar",{staticClass:"nav"},[e("i",{staticClass:"iconfont icon-back",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"}),e("div",{attrs:{slot:"center"},slot:"center"},[t._v("电台")]),e("i",{staticClass:"iconfont icon-share",attrs:{slot:"right"},on:{click:function(n){return n.stopPropagation(),t.shareRadio(n)}},slot:"right"})]),e("scroll-view",{ref:"scrollView",attrs:{height:"25%"}},[e("div",{staticClass:"cover",style:[{backgroundImage:"url("+t.fmtUrl(t.result.picUrl)+")","--height":t.coverHeight+"px"}],attrs:{slot:"cover"},slot:"cover"},[e("div",{staticClass:"cover-text"},[e("div",{staticClass:"dj-name"},[t._v(t._s(t.result.name))]),e("div",{staticClass:"dj-sub"},[t._v(t._s(t._f("round")(t.result.subCount))+"人订阅")])])]),e("div",{staticClass:"tabbar",attrs:{slot:"tab"},slot:"tab"},t._l(t.tabbar,(function(n,s){return e("span",{key:n,class:{active:s===t.activeTab},on:{click:function(n){return n.stopPropagation(),t.tabClick(s)}}},[t._v(t._s(n))])})),0),e("div",{staticClass:"component-wrapper",attrs:{slot:"component"},slot:"component"},[e("loading",{attrs:{isShow:t.loading}}),e(t.currentComponent,t._b({tag:"component",on:{playProgram:t.playProgram,contentLoaded:t.contentLoaded,showMore:t.showMore}},"component",t.currentProp,!1))],1)]),e("transition",{attrs:{name:"slide"}},[t.programInfo&&Object.keys(t.programInfo).length?e("popup",{directives:[{name:"show",rawName:"v-show",value:t.showMoreOption,expression:"showMoreOption"}],attrs:{popUpHeight:-1},on:{togglePopUp:t.togglePopUp}},[e("div",{staticClass:"option-header"},[t._v("电台节目: "+t._s(t.programInfo.name))]),e("div",{staticClass:"option-wrapper"},[e("div",{staticClass:"comment",on:{click:function(n){return n.stopPropagation(),t.noFunc(n)}}},[e("i",{staticClass:"iconfont icon-comment"}),e("span",[t._v("评论 "+t._s("("+t.programInfo.commentCount+")"))])]),e("div",{staticClass:"share",on:{click:function(n){return n.stopPropagation(),t.shareProgram(n)}}},[e("i",{staticClass:"iconfont icon-share"}),e("span",[t._v("分享")])])])]):t._e()],1)],1)},o=[],a=(e("99af"),e("d81d"),e("b0c0"),function(){var t=this,n=t.$createElement,e=t._self._c||n;return Object.keys(t.results).length?e("div",{staticClass:"program-desc"},[e("div",{staticClass:"header"},[t._v("主播")]),e("div",{staticClass:"dj-wrapper"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.fmtUrl(t.results.dj.avatarUrl),expression:"fmtUrl(results.dj.avatarUrl)"}]}),e("span",{staticClass:"nickname"},[t._v(t._s(t.results.dj.nickname))])]),e("div",{staticClass:"header"},[t._v("电台内容简介")]),e("div",{staticClass:"desc"},[t._v(t._s(t.results.desc))]),t.results.commentDatas.length?e("div",{staticClass:"comment-section"},[e("div",{staticClass:"header"},[t._v("精彩评论")]),t._l(t.results.commentDatas,(function(n){return e("div",{key:n.commentId,staticClass:"comment-wrapper"},[e("img",{attrs:{src:t.fmtUrl(n.userProfile.avatarUrl)}}),e("div",{staticClass:"comment"},[e("div",{staticClass:"user"},[t._v(t._s(n.userProfile.nickname))]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.fmtComment(n.content))}}),e("div",{staticClass:"comment-song"},[t._v("---"+t._s(n.programName))])])])}))],2):t._e()]):t._e()}),r=[],i=(e("ac1f"),e("5319"),e("eecb")),c={name:"RadioProgramDesc",mixins:[i["d"]],props:{results:{type:Object,default:function(){},required:!0}},computed:{fmtComment:function(){return function(t){return t.replace(/\n/gm,"</br>")}}},watch:{results:{deep:!0,handler:function(){this.$nextTick((function(){this.$emit("contentLoaded")}))}}}},l=c,u=(e("f1bf"),e("2877")),d=Object(u["a"])(l,a,r,!1,null,"6a7eceb2",null),p=d.exports,m=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.list&&t.list.length?e("div",{staticClass:"program-list"},[e("div",{staticClass:"header"},[t._v("共"+t._s(t.list.length)+"期")]),t._l(t.list,(function(n,s){return e("div",{key:n.id,staticClass:"song-wrapper"},[e("song-view",[e("div",{staticClass:"index",attrs:{slot:"left"},on:{click:function(n){return t.playProgram(s)}},slot:"left"},[t._v(" "+t._s(t.list.length-s%t.list.length)+" ")]),e("div",{staticClass:"song-info",attrs:{slot:"center"},on:{click:function(n){return t.playProgram(s)}},slot:"center"},[e("div",{staticClass:"title"},[t._v(t._s(n.name))]),e("span",{staticClass:"date"},[t._v(t._s(t.getDate(n.createTime)))]),e("span",{staticClass:"play-count "},[e("i",{staticClass:"iconfont icon-play-s"}),t._v(t._s(t._f("round")(n.listenerCount,1)))]),e("span",{staticClass:"duration"},[e("i",{staticClass:"iconfont icon-duration"}),t._v(t._s(t.getTime(n.duration)))])]),e("i",{staticClass:"iconfont icon-more--line",attrs:{slot:"right"},on:{click:function(e){return t.showMore(n)}},slot:"right"})])],1)}))],2):t._e()},f=[],h=e("90b9"),v=e("c6fb"),g={name:"RadioProgramList",components:{SongView:v["a"]},mixins:[i["g"]],props:{list:{type:Array,default:function(){return[]},required:!0}},computed:{getDate:function(){return function(t){var n=Object(h["b"])(t/1e3);return"".concat(1!==(""+n.month).length?n.month:"0"+n.month,"-").concat(1!==(""+n.date).length?n.date:"0"+n.date)}},getTime:function(){return function(t){var n=Object(h["c"])(t);return"".concat(n.minutes,":").concat(n.seconds)}}},methods:{playProgram:function(t){this.$emit("playProgram",t)},showMore:function(t){this.$emit("showMore",t)}},watch:{list:{deep:!0,handler:function(){this.$nextTick((function(){this.$emit("contentLoaded")}))}}}},b=g,_=(e("20ec"),Object(u["a"])(b,m,f,!1,null,"3e309e86",null)),C=_.exports,w=e("ed72"),j=e("e47a"),k=e("95c7"),y=e("d441"),O={name:"RadioProgram",components:{NavBar:j["a"],Popup:y["a"],ScrollView:k["a"]},mixins:[i["g"],i["c"],i["d"],i["e"],i["f"]],data:function(){return{result:[],programs:[],tracks:[],tabbar:["详情","节目"],activeTab:1,coverHeight:0,showMoreOption:!1,programInfo:{}}},created:function(){var t=this,n=this.$route.params.id;Object(w["g"])(n).then((function(n){t.result=n.djRadio})),Object(w["e"])(n).then((function(n){t.programs=n.programs,n.programs.map((function(n){t.tracks.push({id:n.mainSong.id,name:n.name,al:{picUrl:n.coverUrl},ar:[{name:n.radio.name}]})}))}))},mounted:function(){this.coverHeight=this.$refs.scrollView.$refs.cover.clientHeight},computed:{currentComponent:function(){return 1===this.activeTab?C:p},currentProp:function(){return 1===this.activeTab?{list:this.programs}:{results:this.result}}},methods:{contentLoaded:function(){this.loading=!1},goBack:function(){this.$router.go(-1)},noFunc:function(){this.$toast.show("功能未完成",1e3)},playProgram:function(t){this.playSong(this.tracks,t)},showMore:function(t){console.log(t),this.programInfo=t,this.showMoreOption=!0},shareProgram:function(){var t=this,n="分享#".concat(this.result.name,"#的电台节目 ").concat("«"+this.programInfo.name+"»"," https://syhua4.github.io/pear-music-app/#/radio/program/").concat(this.programInfo.id);this.$copyText(n).then((function(){t.$toast.show("复制链接成功",1e3)}),(function(){t.$toast.show("复制链接失败, 请重试",1e3)}))},shareRadio:function(){var t=this,n="分享电台 ".concat("«"+this.result.name+"»"," https://syhua4.github.io/pear-music-app/#/radio/program/").concat(this.result.id);this.$copyText(n).then((function(){t.$toast.show("复制链接成功",1e3)}),(function(){t.$toast.show("复制链接失败, 请重试",1e3)}))},tabClick:function(t){this.loading?this.$toast.show("正在努力加载哦",1e3):this.activeTab=t},togglePopUp:function(){this.showMoreOption=!1}}},P=O,$=(e("6a3e"),Object(u["a"])(P,s,o,!1,null,"0ef8dcb9",null));n["default"]=$.exports},ed72:function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"i",(function(){return a})),e.d(n,"b",(function(){return r})),e.d(n,"d",(function(){return i})),e.d(n,"f",(function(){return c})),e.d(n,"c",(function(){return l})),e.d(n,"h",(function(){return u})),e.d(n,"g",(function(){return d})),e.d(n,"e",(function(){return p}));var s=e("3311");function o(){return Object(s["a"])({url:"/dj/banner"})}function a(){return Object(s["a"])({url:"/dj/category/recommend"})}function r(){return Object(s["a"])({url:"/dj/catelist"})}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(s["a"])({url:"/dj/radio/hot",params:{cateId:t,offset:n}})}function c(){return Object(s["a"])({url:"/dj/program/toplist"})}function l(){return Object(s["a"])({url:"/dj/program/toplist/hours"})}function u(){return Object(s["a"])({url:"/dj/toplist?type=hot"})}function d(t){return Object(s["a"])({url:"/dj/detail",params:{rid:t}})}function p(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return Object(s["a"])({url:"/dj/program",params:{rid:t,limit:n}})}},f1bf:function(t,n,e){"use strict";var s=e("8112"),o=e.n(s);o.a}}]);